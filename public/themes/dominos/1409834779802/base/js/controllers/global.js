var GlobalCtrl=["$scope","$location","$rootScope",function(e,t,n){n.locationParam=[];n.pre=false;var r=e.$location.path().split("/");$.each(r,function(e,t){if(t&&t!=""){n.locationParam.push(t)}});console.log(n.locationParam);e.$on("$locationChangeStart",function(e,t,r){console.log("start",e,t,r);n.prevUrl=r.split("/")});if(n.prevUrl==undefined){n.prevUrl=false}n.isStoreOpen=true;n.storeTime=function(){if(!n.ThemeSettings.theme_settings.enable_store_timings){return}var e=new Date;var t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];n.currentDay=t[e.getDay()];console.log(n.currentDay);var r=n.ThemeSettings.theme_settings.store_timings;n.ThemeSettings.theme_settings.store_start=r[e.getDay()].start;n.ThemeSettings.theme_settings.store_close=r[e.getDay()].close;var i=moment(Date()).format("H");if(i>=parseInt(n.ThemeSettings.theme_settings.store_close)&&i<parseInt(n.ThemeSettings.theme_settings.store_start)){n.isStoreOpen=false}else{n.isStoreOpen=true}var s=n.ThemeSettings.theme_settings.store_close;var o=n.ThemeSettings.theme_settings.store_start;n.closeTimeMinutes=s.slice(3,5);n.startTimeMinutes=o.slice(3,5);if(parseInt(n.ThemeSettings.theme_settings.store_close)>12){n.closeTimeTemporary=parseInt(n.ThemeSettings.theme_settings.store_close)-12}else{n.closeTimeTemporary=parseInt(n.ThemeSettings.theme_settings.store_close)}if(parseInt(n.ThemeSettings.theme_settings.store_start)>12){n.startTimeTemporary=parseInt(n.ThemeSettings.theme_settings.store_start)-12}else{n.startTimeTemporary=parseInt(n.ThemeSettings.theme_settings.store_start)}};n.storeTime();n.timeCheck=function(){var e=moment(Date()).format("H");if(e>=parseInt(n.ThemeSettings.theme_settings.store_close)&&e<parseInt(n.ThemeSettings.theme_settings.store_start)){$("#myModal1").show();n.StartSubmitOrder=false}else if(!n.ThemeSettings.theme_settings.enable_store_timings){$("#myModal1").hide();n.SubmitOrder(n.PaymentMethod,"/thankyou","clear")}else{$("#myModal1").hide();n.SubmitOrder(n.PaymentMethod,"/thankyou","clear")}$("#close-popup").click(function(){$("#myModal1").hide()})};n.Customer.ShippingCountry="Pakistan";n.Customer.Country="Pakistan";n.userStatus=function(){if(n.User.info.CustomerEmail&&n.IfCart()){t.path("/confirm")}else if(!n.User.info.CustomerEmail&&n.IfCart()){t.path("/login")}};n.redirectHandler=function(e){if(n.prevUrl==false&&e=="Login"){n.CheckLogin("/")}else if(n.prevUrl==false&&e=="Guest"){n.GuestLogin("/")}else if(n.prevUrl==false&&e=="Signup"){n.Signup("/")}else if(n.prevUrl[n.prevUrl.length-1]=="signup"&&e=="Login"){n.CheckLogin("/")}else if(n.prevUrl[n.prevUrl.length-1]=="cart"&&e=="Login"){n.CheckLogin("confirm")}else if(n.prevUrl[n.prevUrl.length-1]=="signup"&&e=="Guest"){n.GuestLogin("/")}else if(n.prevUrl[n.prevUrl.length-1]=="cart"&&e=="Guest"){n.GuestLogin("confirm")}else if(n.prevUrl[n.prevUrl.length-1]=="login"&&!n.IfCart()&&e=="Signup"){n.SignUp("/")}else if(n.prevUrl[n.prevUrl.length-1]=="login"&&n.IfCart()&&e=="Signup"){n.SignUp("confirm")}else if(e=="Login"){n.CheckLogin("window.history.back()")}else if(e=="Guest"){n.GuestLogin("window.history.back()")}else if(e=="Signup"){n.Signup("window.history.back()")}console.log(n.prevUrl)};n.resetLocalityValues=function(e,t){localStorage.removeItem("Outlet");n.User.info.outletName=null;n.SetLocalStorageGlobal(e,t)};n.SetLocalStorageGlobal=function(e,t){localStorage.setItem(t,e)};n.UpdatePaymentMethod=function(e){n.PaymentMethod=e};n.UpdateCountryName=function(e){n.User.info.CountryName=e};n.UpdateLocalityName=function(e){n.User.info.LocalityName=e};n.UpdateAreaName=function(e){n.User.info.AreaName=e};n.UpdateoutletName=function(e){n.User.info.outletName=e};if(n.isAddress==undefined){n.isAddress=false}n.preDeal=function(e){n.deal=e;if(n.isAddress){t.path(n.deal)}else{t.path("page/order")}};n.postDeal=function(){if(n.deal){t.path(n.deal)}};if(n.isUrl==undefined){n.isUrl=false}n.urlChange=function(){n.url=window.location.href;n.isUrl=true;var e=navigator.userAgent.toLowerCase();n.isAndroid=e.indexOf("android")>-1;n.redirect=n.url.split("/");if(n.redirect[3]=="thankyou"){t.path("/")}else if(n.redirect[3]=="confirm"){t.path("/")}else if(n.redirect[4]=="app"&&!n.isAndroid){t.path("/app")}else if(n.redirect[3]=="app"&&n.isAndroid&&$(window).width()<500||n.redirect[4]=="app"&&n.isAndroid&&$(window).width()<500)window.location.replace("https://play.google.com/store/apps/details?id=com.retailer.dom")};n.urlChange();n.ifdrinks=function(){console.log(n.Cart);var e=false;$.each(n.Cart,function(t,r){if(r){if(!r.productInfo){$.each(r,function(r,i){console.log(n.Cart[t][r]);if(n.Cart[t][r].productInfo.productName=="Pepsi"||n.Cart[t][r].productInfo.productName=="Aquafina"||n.Cart[t][r].productInfo.productName=="Mountain Dew"||n.Cart[t][r].productInfo.productName=="7up"||n.Cart[t][r].productInfo.productName=="Mirinda"||n.Cart[t][r].productInfo.productName=="Slice Mango"){e=true}})}else{if(r.productInfo.productName=="Pepsi"||r.productInfo.productName=="Aquafina"||r.productInfo.productName=="Mountain Dew"||r.productInfo.productName=="7up"||r.productInfo.productName=="Mirinda"||r.productInfo.productName=="Slice Mango"){e=true}}}});console.log(e+"BDA");return e};n.precollection=function(e){n.precoll=e};n.postcollection=function(){if(n.precoll&&n.prevUrl[3]!="cart"){t.path("collections/"+n.precoll)}else if(n.prevUrl[3]=="cart"){t.path(window.history.back());console.log(n.prevUrl[3])}else{t.path("collections/all")}};console.log(n.prevUrl);n.setLocalStorageData=function(){if(localStorage.getItem("Payment")){n.PaymentMethod=localStorage.getItem("Payment")}if(localStorage.getItem("City")){n.User.info.CountryName=localStorage.getItem("City")}if(localStorage.getItem("Locality")){n.User.info.LocalityName=localStorage.getItem("Locality")}if(localStorage.getItem("Area")){n.User.info.AreaName=localStorage.getItem("Area")}if(localStorage.getItem("Outlet")){n.User.info.outletName=localStorage.getItem("Outlet")}}}];var HomeCtrl=["$scope","$location","$rootScope",function(e,t,n){n.locationParam=[];var r=e.$location.path().split("/");$.each(r,function(e,t){if(t&&t!=""){n.locationParam.push(t)}});if(n.SettingGeneral){if(n.SettingGeneral.settings.meta_title){n.title=n.SettingGeneral.settings.meta_title}}e.playVideo=true;e.videoDominos=function(){e.playVideo=true;e.$apply()}}];var CollectionCtrl=["$scope","$location","AzureMobileClient","$rootScope","$routeParams","$cookies","$http",function(e,t,n,r,s,o,u){e.priceRange={name:"Price Range",minPrice:0,maxPrice:0};e.SearchVendorsearch={};r.productCount=0;e.hasBrandInCollection=function(t){var n=false;var i=0;$.each(r.ListProduct,function(s,o){var u=0;if(o.productVendor==t){u++}if(o.productCollections){if(typeof o.productCollections=="object"){$.each(o.productCollections,function(t,n){if(e.routeParam==n.urlParam){console.log(o);u++}})}if(u>=2){console.log(o);n=true;i++;if(!o.productMultiOptions){if(o.productPrice&&e.priceRange.maxPrice<o.productPrice){e.priceRange.maxPrice=o.productPrice}}else{var a=r.returnPrice(o);if(a&&e.priceRange.maxPrice<a){e.priceRange.maxPrice=o.productPrice}}}}});return i};e.SearchVendorsearchReturn=function(t){var n=false;$.each(e.SearchVendorsearch,function(e,t){if(t==true){n=true}});if(!n){return t}var r=[];var i=false;$.each(e.SearchVendorsearch,function(e,n){if(t.productVendor){if(e==t.productVendor&&n==true){i=true}}});if(i){return t}else{return false}};e.SearchMinMaxPriceReturn=function(t){var n=[];var i=false;if(!t.productMultiOptions){if(t.productPrice>=e.priceRange.minPrice&&t.productPrice<=e.priceRange.maxPrice){i=true}}else{var s=r.returnPrice(t);if(s>=e.priceRange.minPrice&&s<=e.priceRange.maxPrice){i=true}}if(i){return t}else{return false}};e.routeParam=s.CollectionName;r.title=unescape(seoTitle);e.InitCollection=function(){console.log(e.routeParam);if(e.routeParam=="all"){r.title=r.SettingGeneral.settings.meta_title;return true}$.each(r.ListCollection,function(t,n){if(n.collectionUrl==e.routeParam){r.title=n.collectionSeoTitle}})};e.init=function(){e.startFromPage=0;e.pageLimit=3};e.totalProducts=0;e.noOfPages=[];e.addProductCount=function(){e.totalProducts=e.totalProducts+1};e.expectedPages=0;e.pagesCounts=function(){e.noOfPages=[];if(r.productCount){var t=parseInt(r.productCount/e.pageLimit);var n=r.productCount%e.pageLimit;if(n>0){t=t+1}e.expectedPages=t;for(i=1;i<=t;i++){e.noOfPages.push(i)}}return e.noOfPages};e.currentPage=1;e.returnStateActive=function(t){if(e.pageLimit*t==e.startFromPage){e.currentPage=t+1;return true}return false};e.selectPage=function(t){if(t=="n"){e.startFromPage=e.startFromPage+e.pageLimit}else if(t=="p"){e.startFromPage=e.startFromPage-e.pageLimit}else{e.startFromPage=t*e.pageLimit}};r.locationParam=[];var a=e.$location.path().split("/");$.each(a,function(e,t){if(t&&t!=""){r.locationParam.push(t)}});e.nextPage=function(){e.startFromPage=e.startFromPage+1};e.previousPage=function(){e.startFromPage=e.startFromPage-1};e.returnPages=function(t){return Math.ceil(t/e.pageSize)};e.numberOfPages=function(t,n){if(t.length){e.TotalCounts=0;$.each(t,function(t,r){if(r.productCollections){$.each(r.productCollections,function(t,r){if(r.urlParam==n.collection){e.TotalCounts=parseInt(e.TotalCounts)+1}})}})}}}];var ProductCtrl=["$scope","$location","AzureMobileClient","$rootScope","$routeParams","$cookies",function(e,t,n,r,i,s){r.locationParam=[];var o=e.$location.path().split("/");$.each(o,function(e,t){if(t&&t!=""){r.locationParam.push(t)}});e.routeParam=i.ProductSlug;r.title=unescape(seoTitle);e.InitProduct=function(){$.each(r.ListProduct,function(t,n){if(n.productUrl==e.routeParam){r.title=n.productSeoTitle}})}}];var CarouselDemoCtrl=["$scope",function(e){e.myInterval=5e3;var t=e.slides=[];e.addSlide=function(){var e=600+t.length;t.push({image:"http://placekitten.com/"+e+"/300",text:["More","Extra","Lots of","Surplus"][t.length%4]+" "+["Cats","Kittys","Felines","Cutes"][t.length%4]})};for(var n=0;n<4;n++){e.addSlide()}}];var PageCtrl=["$scope","$location","AzureMobileClient","$rootScope","$routeParams","$cookies",function(e,t,n,r,i,s){r.locationParam=[];var o=e.$location.path().split("/");$.each(o,function(e,t){if(t&&t!=""){r.locationParam.push(t)}});e.routeParam=i.PageUrl;r.title=unescape(seoTitle);e.InitPage=function(){$.each(r.ListPage,function(t,n){if(n.pageUrl==e.routeParam){r.title=n.pageSeoTitle}})}}];var CartCtrl=["$scope","$location","$rootScope",function(e,t,n){n.locationParam=[];var r=e.$location.path().split("/");$.each(r,function(e,t){if(t&&t!=""){n.locationParam.push(t)}});n.title="Cart - "+n.SettingGeneral.settings.meta_title}];var ConfirmCtrl=["$scope","$location","$rootScope",function(e,t,n){n.locationParam=[];var r=e.$location.path().split("/");$.each(r,function(e,t){if(t&&t!=""){n.locationParam.push(t)}});n.title="Confirm - "+n.SettingGeneral.settings.meta_title}];var LoginCtrl=["$scope","$location","$rootScope",function(e,t,n){n.locationParam=[];var r=e.$location.path().split("/");$.each(r,function(e,t){if(t&&t!=""){n.locationParam.push(t)}});n.title="Login - "+n.SettingGeneral.settings.meta_title}];var ResetCtrl=["$scope","$location","$rootScope",function(e,t,n){n.locationParam=[];var r=e.$location.path().split("/");$.each(r,function(e,t){if(t&&t!=""){n.locationParam.push(t)}});n.title="Reset Password - "+n.SettingGeneral.settings.meta_title}];var SignupCtrl=["$scope","$location","$rootScope",function(e,t,n){n.locationParam=[];var r=e.$location.path().split("/");$.each(r,function(e,t){if(t&&t!=""){n.locationParam.push(t)}});n.title="Signup - "+n.SettingGeneral.settings.meta_title}];var ThankyouCtrl=["$scope","$location","$rootScope","$window",function(e,t,n,r){n.locationParam=[];var i=e.$location.path().split("/");$.each(i,function(e,t){if(t&&t!=""){n.locationParam.push(t)}});n.title="Thankyou - "+n.SettingGeneral.settings.meta_title;n.myCart=function(){ga("require","ecommerce","ecommerce.js");var e={id:n.OrderInfo.orderid,affiliation:"Domino's Pakistan",revenue:n.ReturnTotal(),tax:n.ReturnTaxPrice()};console.log(e);ga("ecommerce:addTransaction",e);$.each(n.Cart,function(e,t){if(t){if(!t.productInfo){$.each(t,function(t,r){if(n.Cart[e][t].productInfo){var i=n.Cart[e][t];var s=n.Cart[e][t].productID;var o=n.Cart[e][t].productInfo.productName;var u=n.Cart[e][t].productInfo.productPrice;var a=n.Cart[e][t].productInfo.productQuantity;var f=n.Cart[e][t].productInfo.productSKU;$.each(n.Cart[e][t].productInfo.productCollections,function(e,t){var r=t.name;if(n.Cart){var i={id:n.OrderInfo.orderid||"Domino's Product",name:o||"Domino's Product",sku:f||"Domino's SKU",category:r||"Domino's Pizza",price:u||"Domino's Price",quantity:a||"Domino's Quantity",currency:"PKR"};console.log(i);ga("ecommerce:addItem",i);ga("ecommerce:send")}})}})}}});n.Cart={};n.SetLocalStorage("Cart")};n.myCart();e.fireConversion=function(){r.google_trackConversion({google_conversion_id:965411833,google_conversion_language:"en",google_conversion_format:"2",google_conversion_color:"ffffff",google_conversion_label:"hLx9CMfa2ggQ-YeszAM",google_conversion_value:1})};e.fireConversion()}];var AccountCtrl=["$scope","$location","$rootScope",function(e,t,n){n.locationParam=[];var r=e.$location.path().split("/");$.each(r,function(e,t){if(t&&t!=""){n.locationParam.push(t)}})}];var OrdersCtrl=["$scope","$location","$rootScope",function(e,t,n){n.locationParam=[];var r=e.$location.path().split("/");$.each(r,function(e,t){if(t&&t!=""){n.locationParam.push(t)}})}];var SearchCtrl=["$scope","$location","AzureMobileClient","$rootScope","$routeParams","$cookies","$http",function(e,t,n,r,s,o,u){r.productCount=0;e.routeParam=s.CollectionName;e.init=function(){e.startFromPage=0;e.pageLimit=3};e.totalProducts=0;e.noOfPages=[];e.addProductCount=function(){e.totalProducts=e.totalProducts+1};e.expectedPages=0;e.pagesCounts=function(){e.noOfPages=[];if(r.productCount){var t=parseInt(r.productCount/e.pageLimit);var n=r.productCount%e.pageLimit;if(n>0){t=t+1}e.expectedPages=t;for(i=1;i<=t;i++){e.noOfPages.push(i)}}return e.noOfPages};e.currentPage=1;e.returnStateActive=function(t){if(e.pageLimit*t==e.startFromPage){e.currentPage=t+1;return true}return false};e.selectPage=function(t){if(t=="n"){e.startFromPage=e.startFromPage+e.pageLimit}else if(t=="p"){e.startFromPage=e.startFromPage-e.pageLimit}else{e.startFromPage=t*e.pageLimit}};r.locationParam=[];var a=e.$location.path().split("/");$.each(a,function(e,t){if(t&&t!=""){r.locationParam.push(t)}});e.nextPage=function(){e.startFromPage=e.startFromPage+1};e.previousPage=function(){e.startFromPage=e.startFromPage-1};e.returnPages=function(t){return Math.ceil(t/e.pageSize)};e.numberOfPages=function(t,n){if(t.length){e.TotalCounts=0;$.each(t,function(t,r){if(r.productCollections){$.each(r.productCollections,function(t,r){if(r.urlParam==n.collection){e.TotalCounts=parseInt(e.TotalCounts)+1}})}})}}}];var OrderCtrl=["$scope","$location","$rootScope","$routeParams",function(e,t,n,r){n.locationParam=[];var i=e.$location.path().split("/");$.each(i,function(e,t){if(t&&t!=""){n.locationParam.push(t)}});e.routeParam=r.PageUrl;n.title=unescape(seoTitle);e.InitPage=function(){$.each(n.ListPage,function(t,r){if(r.pageUrl==e.routeParam){n.title=r.pageSeoTitle}})}}]
var ErrorCtrl=["$scope","$location","$rootScope",function(e,t,n){n.locationParam=[];var r=e.$location.path().split("/");$.each(r,function(e,t){if(t&&t!=""){n.locationParam.push(t)}})}]
function check(e){if(e.value!=document.getElementById("Password").value){e.setCustomValidity("The Password and Confirm Password must match.")}else{e.setCustomValidity("")}}
aeCommerce.filter('startFrom', function() {
    return function(input, start) {
      if(input){
      //console.log(start +  'start');
        //console.log(input +  'inout');
            start = +start; //parse to int
      start = +start; //parse to int
      //console.log(input.slice(start));
      return input.slice(start);
    }else{
      return 0;
    }
  }
});
aeCommerce.filter('returnTotals', function($rootScope) {
    return function(input) {
    //console.log('---------------bda-------------------');
    //console.log(input);
    var items = 0;
    $.each(input,function(index,item){
      items++;
    });
    $rootScope.productCount = items;
    //console.log('---------------end-------------------');
    return input;
    
  }
});
aeCommerce.directive('dynamic', function ($compile) {
    return {
      restrict: 'A',
      replace: true,
      link: function (scope, ele, attrs) {
        scope.$watch(attrs.dynamic, function(html) {
          ele.html(html);
          $compile(ele.contents())(scope);
        });
      }
    };
  });
